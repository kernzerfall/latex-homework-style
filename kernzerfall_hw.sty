%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%- kernzerfall's LaTeX Theme for Homework -%%%%
%%%%-                                        -%%%%
%%%%- Revision: R4-13.05.2022                -%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% ------ Requirements ------ %
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{kernzerfall_hw}[kernzerfall's LaTeX theme for Homework]
\RequirePackage{hyperref}
\RequirePackage{csvsimple}
\RequirePackage{bookmark}

% ------ Abuse requires to make the boilerplate lighter ------ %

% Geometry
\RequirePackage[a4paper, top=2cm, left=2cm, right=2cm]{geometry}

% Math Symbols
\RequirePackage{amsmath}
\RequirePackage{amssymb}
\RequirePackage{mathtools}
\RequirePackage{microtype}
\RequirePackage{stmaryrd}

% Graphics
\RequirePackage{tikz}
\RequirePackage{graphicx}
\RequirePackage{pdfpages}

% Fonts/Encoding
\RequirePackage{lmodern}
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}

% Code listings
\RequirePackage{listings}

% ------ Metadata ------ %
\AtBeginDocument{
	\hypersetup{bookmarksnumbered=true,%
	}
}

% ------ Environment variables ------ %
\newcommand{\group}[1]{\renewcommand{\group}{#1}}
\newcommand{\@group}{}
\newcommand{\class}[1]{\renewcommand{\class}{#1}}
\newcommand{\@class}{}
\newcommand{\assignment}[1]{\renewcommand{\assignment}{#1}}
\newcommand{\@assignment}{}
\def \teamname{\,}
\newcommand{\team}[1]{\def \teamname{#1}}
% ------ Group Roster Table ------- %

% Path to CSV
% Default path: working directory/group.csv
\def \groupcsv{group.csv}
% Command to update csv path
\newcommand{\usegroupcsv}[1]{\def \groupcsv{#1}}

\newcommand{\makegrouproster}{%
    \begin{center}%
        \vspace{2em}%
        \csvreader[tabular=|l|c|,%
            table head=\hline\titlefont{Vor- und Nachname} & \titlefont{Matrikelnummer}\\\hline,%
            late after line=\\,%
            late after last line=\\\hline%
        ]{\groupcsv}%
        {name=\name, matrnr=\matrnr}%
        {\name & \matrnr}%
    \end{center}
}

% ------ Maketitle ------ %
\renewcommand{\maketitle}%
{%
    \title{\assignment}%
    \if \teamname {\,}%
        \author{\group}%
    \else%
        \author{\group~-~\teamname}%
    \fi%
    \subject{\class}%
    \hypersetup{%
        pdftitle={\@title},
        pdfauthor={\@author},
        pdfsubject={\@subject}
    }%
    \begin{center}%
        \titlefont%
        \large{\class\hfill\group} \\
        \normalsize{\assignment\hfill\teamname}\\
        \normalfont%
    \end{center}%
}

% ------ Little things to make my life easier ------ %
\newcommand{\sothat}{\,\,|\,\,}
\newcommand{\ds}[1]{\,\,~#1~\,\,}
\newcommand{\qed}{$\square$}
\newcommand{\qedright}{\hfill\qed}
\newcommand{\qea}{\lightning}

% Common math sets
\newcommand{\C}{\ensuremath{\mathbb C}}
\newcommand{\R}{\ensuremath{\mathbb R}}
\newcommand{\Q}{\ensuremath{\mathbb Q}}
\newcommand{\Z}{\ensuremath{\mathbb Z}}
\newcommand{\N}{\ensuremath{\mathbb N}}

% Common mathcal letters
\newcommand{\calA}{\ensuremath{\mathcal A}}
\newcommand{\calB}{\ensuremath{\mathcal B}}

% Drawing Finite Automata
\newcommand{\tikzfosap}{%
    \usetikzlibrary{automata, positioning, arrows, shapes.geometric}%
    \tikzset{%
        ->, % gerichtete Kanten
        >=stealth, % dicke Pfeile
        node distance=3cm, % min. Distanz zwischen Knoten
        every state/.style={thick, fill=gray!10}, % `state` Farbe und Dicke
        elliptic/.style={draw,ellipse},%
        initial text=$ $, % Text auf dem ersten Pfeil
    }
}

% lstlistings style
\newcommand{\codestyle}{%
    \definecolor{codegreen}{rgb}{0,0.6,0}%
    \definecolor{codegray}{rgb}{0.5,0.5,0.5}%
    \definecolor{codepurple}{rgb}{0.58,0,0.82}%
    \definecolor{backcolour}{rgb}{0.95,0.95,0.92}%
    \lstdefinestyle{krnz_code}{%
        backgroundcolor=\color{backcolour},%
        commentstyle=\color{codegreen},%
        keywordstyle=\color{magenta},%
        numberstyle=\tiny\color{codegray},%
        stringstyle=\color{codepurple},%
        basicstyle=\ttfamily\footnotesize,%
        breakatwhitespace=false,%         
        breaklines=true,%                 
        captionpos=b,%                    
        keepspaces=true,%                 
        numbers=left,%                    
        numbersep=5pt,%                  
        showspaces=false,%                
        showstringspaces=false,%
        showtabs=false,%                  
        tabsize=2%
    }%
    \lstset{style=krnz_code}%
}